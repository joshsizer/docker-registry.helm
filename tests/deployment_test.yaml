suite: Deployment Template Tests
templates:
  - templates/deployment.yaml
tests:
  - it: should create a deployment with default replica count and image
    set:
      replicaCount: 1
      image:
        repository: registry
        tag: 2.8.1
    asserts:
      - equal:
          path: spec.replicas
          value: 1
      - equal:
          path: spec.template.spec.containers[0].image
          value: "registry:2.8.1"
  - it: should allow overriding the replica count
    set:
      replicaCount: 3
    asserts:
      - equal:
          path: spec.replicas
          value: 3